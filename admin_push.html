<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–ö Support: Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</title>
    <style>
        /* --- CSS –°—Ç–∏–ª–∏ --- */
        :root {
            --primary: #008751;
            --primary-dark: #006b3f;
            --bg-body: #f0f2f5;
            --bg-card: #ffffff;
            --text-main: #1c1e21;
            --text-muted: #65676b;
            --border: #ced0d4;
            --accent-red: #e41e3f;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1.6fr;
            gap: 20px;
        }

        @media (max-width: 850px) {
            .container { grid-template-columns: 1fr; }
        }

        /* Header */
        header {
            grid-column: 1 / -1;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        h1 { font-size: 22px; margin: 0; color: #333; }
        .environment-badge {
            background: #fff3cd;
            color: #856404;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            border: 1px solid #ffeeba;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }

        h2 {
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-top: 0;
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        /* Form Elements */
        label { font-size: 13px; font-weight: 600; margin-bottom: 5px; display: block; }
        
        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 5px;
            font-size: 14px;
            margin-bottom: 15px;
            box-sizing: border-box;
            font-family: inherit;
        }

        input:focus, textarea:focus, select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 135, 81, 0.1);
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
        }

        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); }
        
        .btn-outline { 
            background: transparent; 
            border: 1px solid var(--border); 
            color: var(--text-main);
        }
        .btn-outline:hover { border-color: var(--text-main); }

        /* Search Area */
        .search-row { display: flex; gap: 10px; }
        .search-row input { margin-bottom: 0; }

        /* User Result Card */
        #user-result {
            margin-top: 20px;
            border: 1px solid var(--border);
            background: #f9fafb;
            border-radius: 6px;
            padding: 15px;
            display: none; 
        }
        
        #user-result.active { display: block; animation: fadeIn 0.3s; }

        .user-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .user-login { font-size: 18px; font-weight: bold; }
        
        .user-meta { 
            display: flex; 
            gap: 15px; 
            font-size: 14px; 
            color: var(--text-muted);
            align-items: center;
        }
        .user-meta span strong { color: var(--text-main); }

        .vip-badge {
            background: #ffedd5; color: #9a3412; padding: 2px 6px; border-radius: 4px; font-size: 11px; text-transform: uppercase;
        }

        /* Table */
        .history-section { grid-column: 1 / -1; }
        .table-wrapper { max-height: 400px; overflow-y: auto; border: 1px solid var(--border); border-radius: 5px; }
        
        table { width: 100%; border-collapse: collapse; font-size: 13px; }
        thead th { background: #f7f8fa; position: sticky; top: 0; padding: 12px; text-align: left; color: var(--text-muted); border-bottom: 1px solid var(--border); }
        tbody td { padding: 12px; border-bottom: 1px solid var(--border); }
        tbody tr:hover { background: #f0f9f4; }

        /* Notification Toast */
        #toast {
            visibility: hidden;
            min-width: 300px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            bottom: 30px;
            right: 30px;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            opacity: 0;
            transition: opacity 0.3s, bottom 0.3s;
        }
        #toast.show {
            visibility: visible;
            opacity: 1;
            bottom: 50px;
        }
        #toast.success { border-left: 5px solid var(--primary); }
        #toast.error { border-left: 5px solid var(--accent-red); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>üì£ CRM: –û—Ç–ø—Ä–∞–≤–∫–∞ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h1>
        <span class="environment-badge">TEST ENVIRONMENT</span>
    </header>

    <section class="card">
        <h2>1. –ü–æ–∏—Å–∫ –ò–≥—Ä–æ–∫–∞</h2>
        <div class="search-row">
            <input type="text" id="search-input" placeholder="ID –∞–∫–∫–∞—É–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1029384)">
            <button class="btn btn-primary" onclick="findUser()">–ù–∞–π—Ç–∏</button>
        </div>
        <small style="color: #888; margin-top: 5px;">–¢–µ—Å—Ç–æ–≤—ã–µ ID: 7483921, 1029384, 5566778...</small>

        <div id="user-result">
            <div class="user-header">
                <div class="user-login" id="u-login">Login</div>
                <span class="vip-badge" id="u-status">VIP</span>
            </div>
            <div class="user-meta">
                <span>–ò–º—è –∏–≥—Ä–æ–∫–∞: <strong id="u-name">Name</strong></span>
            </div>
            <div style="margin-top: 15px; text-align: right;">
                <button class="btn btn-outline" id="select-btn" onclick="selectUser()">–í—ã–±—Ä–∞—Ç—å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏</button>
            </div>
        </div>
        <div id="search-error" style="color: var(--accent-red); margin-top: 10px; display: none;">–ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω</div>
    </section>

    <section class="card">
        <h2>2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
        <form onsubmit="event.preventDefault(); sendPush();">
            
            <label for="template-select">–ë—ã—Å—Ç—Ä—ã–µ —à–∞–±–ª–æ–Ω—ã</label>
            <select id="template-select" onchange="applyTemplate()">
                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω --</option>
                <option value="win">‚úÖ –í–∞—à–∞ —Å—Ç–∞–≤–∫–∞ –≤—ã–∏–≥—Ä–∞–ª–∞</option>
                <option value="withdraw">üí∏ –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –æ–¥–æ–±—Ä–µ–Ω</option>
                <option value="bonus">üéÅ –í–∞–º –Ω–∞—á–∏—Å–ª–µ–Ω —Ñ—Ä–∏–±–µ—Ç</option>
                <option value="kyc">‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è</option>
                <option value="top_match">‚öΩ –¢–æ–ø –º–∞—Ç—á —Å–µ–≥–æ–¥–Ω—è</option>
            </select>

            <label for="push-title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
            <input type="text" id="push-title" placeholder="–í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è">

            <label for="push-text">–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è</label>
            <textarea id="push-text" rows="4" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è..."></textarea>

            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div style="font-size: 12px; color: #888;">
                    –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: <code>{{first_name}}</code>, <code>{{ticket_id}}</code>
                </div>
                <button type="submit" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å Push</button>
            </div>
        </form>
    </section>

    <section class="card history-section">
        <h2>–ò—Å—Ç–æ—Ä–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π (–õ–æ–≥)</h2>
        <div class="table-wrapper">
            <table id="history-table">
                <thead>
                    <tr>
                        <th width="15%">–í—Ä–µ–º—è</th>
                        <th width="15%">ID –ò–≥—Ä–æ–∫–∞</th>
                        <th>–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</th>
                        <th width="10%">–°—Ç–∞—Ç—É—Å</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>23.11.2025 14:30</td>
                        <td>8839201</td>
                        <td>–í–∞—à–∞ —Å—Ç–∞–≤–∫–∞ ‚Ññ4829 –Ω–∞ –º–∞—Ç—á "–ß–µ–ª—Å–∏ - –ê—Ä—Å–µ–Ω–∞–ª" —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –≤—ã–∏–≥—Ä—ã—à–µ–º!</td>
                        <td style="color:green; font-weight:bold;">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</td>
                    </tr>
                    <tr>
                        <td>23.11.2025 12:15</td>
                        <td>1029384</td>
                        <td>–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—É–º–º—É 5000‚ÇΩ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω.</td>
                        <td style="color:green; font-weight:bold;">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>

<div id="toast">–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>

<script>
    // --- 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–±–µ–∑ –±–∞–ª–∞–Ω—Å–∞) ---
    const usersDB = [
        { id: "1029384", name: "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –í.", status: "VIP Platinum" },
        { id: "7483921", name: "–î–º–∏—Ç—Ä–∏–π –ö.", status: "–ù–æ–≤–∏—á–æ–∫" },
        { id: "5566778", name: "–ï–ª–µ–Ω–∞ –°.", status: "Active" },
        { id: "9988776", name: "–ú–∞–∫—Å–∏–º –ì.", status: "Blocked" },
        { id: "1234567", name: "–ò–≤–∞–Ω –ü.", status: "VIP Gold" },
        { id: "8839201", name: "–°–µ—Ä–≥–µ–π –ú.", status: "Active" },
        { id: "3344556", name: "–û–ª—å–≥–∞ –¢.", status: "Active" },
        { id: "9012345", name: "–í–∏–∫—Ç–æ—Ä –†.", status: "–ù–æ–≤–∏—á–æ–∫" },
        { id: "6789012", name: "–ê–Ω–¥—Ä–µ–π –õ.", status: "Whale" },
        { id: "3456789", name: "–ü–∞–≤–µ–ª –û.", status: "Active" },
        { id: "2345678", name: "–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏–Ω –ñ.", status: "Active" },
        { id: "8765432", name: "–ú–∞—Ä–∏—è –®.", status: "Active" },
        { id: "1122334", name: "–¢–∏–º—É—Ä –ó.", status: "VIP Gold" },
        { id: "5544332", name: "–†–æ–º–∞–Ω –î.", status: "–ù–æ–≤–∏—á–æ–∫" },
        { id: "9900112", name: "–ï–≤–≥–µ–Ω–∏–π –¶.", status: "Active" }
    ];

    let selectedUser = null;

    // --- 2. –õ–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ ---
    function findUser() {
        const inputVal = document.getElementById('search-input').value.trim();
        const resultBlock = document.getElementById('user-result');
        const errorBlock = document.getElementById('search-error');
        
        const user = usersDB.find(u => u.id === inputVal);

        if (user) {
            document.getElementById('u-login').textContent = `ID: ${user.id}`;
            document.getElementById('u-name').textContent = user.name;
            document.getElementById('u-status').textContent = user.status;
            // –°—Ç—Ä–æ–∫–∞ —Å –±–∞–ª–∞–Ω—Å–æ–º —É–¥–∞–ª–µ–Ω–∞
            
            resultBlock.classList.add('active');
            errorBlock.style.display = 'none';
            
            const btn = document.getElementById('select-btn');
            btn.textContent = "–í—ã–±—Ä–∞—Ç—å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏";
            btn.classList.remove('btn-primary');
            btn.classList.add('btn-outline');
            selectedUser = null;
        } else {
            resultBlock.classList.remove('active');
            errorBlock.style.display = 'block';
            selectedUser = null;
        }
    }

    // --- 3. –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ ---
    function selectUser() {
        const inputVal = document.getElementById('search-input').value.trim();
        const user = usersDB.find(u => u.id === inputVal);
        
        if (user) {
            selectedUser = user;
            const btn = document.getElementById('select-btn');
            btn.textContent = "‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–Ω";
            btn.classList.remove('btn-outline');
            btn.classList.add('btn-primary');
            showToast(`–ò–≥—Ä–æ–∫ ${user.id} –≤—ã–±—Ä–∞–Ω`, 'success');
        }
    }

    // --- 4. –®–∞–±–ª–æ–Ω—ã ---
    function applyTemplate() {
        const val = document.getElementById('template-select').value;
        const titleField = document.getElementById('push-title');
        const textField = document.getElementById('push-text');

        switch(val) {
            case 'win':
                titleField.value = "–í–∞—à–∞ —Å—Ç–∞–≤–∫–∞ —Å—ã–≥—Ä–∞–ª–∞! üèÜ";
                textField.value = "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, {{first_name}}! –í–∞—à–∞ —Å—Ç–∞–≤–∫–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –≤—ã–∏–≥—Ä—ã—à–µ–º.";
                break;
            case 'withdraw':
                titleField.value = "–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –æ–¥–æ–±—Ä–µ–Ω üí∏";
                textField.value = "–°—Ä–µ–¥—Å—Ç–≤–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≤–∞—à—É –∫–∞—Ä—Ç—É. –û–∂–∏–¥–∞–π—Ç–µ –∑–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∞–Ω–∫–æ–º.";
                break;
            case 'bonus':
                titleField.value = "–í–∞–º –Ω–∞—á–∏—Å–ª–µ–Ω –§—Ä–∏–±–µ—Ç üî•";
                textField.value = "–ú—ã –Ω–∞—á–∏—Å–ª–∏–ª–∏ –≤–∞–º –±–æ–Ω—É—Å. –£—Å–ø–µ–π—Ç–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤!";
                break;
            case 'kyc':
                titleField.value = "–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ üõÇ";
                textField.value = "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –ø–∞—Å–ø–æ—Ä—Ç–∞ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –¥–ª—è —Å–Ω—è—Ç–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.";
                break;
            case 'top_match':
                titleField.value = "–°—É–ø–µ—Ä–º–∞—Ç—á —Å–µ–≥–æ–¥–Ω—è! ‚öΩ";
                textField.value = "–†–µ–∞–ª –ú–∞–¥—Ä–∏–¥ vs –ë–∞—Ä—Å–µ–ª–æ–Ω–∞. –ü–æ–≤—ã—à–µ–Ω–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã —É–∂–µ –Ω–∞ —Å–∞–π—Ç–µ!";
                break;
            default:
                titleField.value = "";
                textField.value = "";
        }
    }

    // --- 5. –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—É—à–∞ ---
    function sendPush() {
        const title = document.getElementById('push-title').value;
        const text = document.getElementById('push-text').value;

        if (!selectedUser) {
            showToast("–û—à–∏–±–∫–∞: –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!", "error");
            return;
        }
        if (!title || !text) {
            showToast("–û—à–∏–±–∫–∞: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç!", "error");
            return;
        }

        const message = `[–¢–ï–°–¢–û–í–ê–Ø –°–†–ï–î–ê]\n–í—ã —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ PUSH –¥–ª—è ID: ${selectedUser.id}\n\n–¢–µ–∫—Å—Ç: "${text}"`;
        
        showToast("–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ –æ—á–µ—Ä–µ–¥—å", "success");
        addHistoryRow(selectedUser.id, text);
        
        setTimeout(() => {
            alert(message);
        }, 500);
    }

    function addHistoryRow(login, text) {
        const table = document.getElementById('history-table').getElementsByTagName('tbody')[0];
        const newRow = table.insertRow(0);
        
        const now = new Date();
        const timeString = now.toLocaleDateString() + ' ' + now.toLocaleTimeString().slice(0,5);

        newRow.innerHTML = `
            <td>${timeString}</td>
            <td>${login}</td>
            <td>${text}</td>
            <td style="color:green; font-weight:bold;">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ</td>
        `;
    }

    function showToast(message, type) {
        const toast = document.getElementById("toast");
        toast.textContent = message;
        toast.className = "show";
        if (type === 'success') toast.classList.add('success');
        if (type === 'error') toast.classList.add('error');
        setTimeout(function(){ toast.className = toast.className.replace("show", ""); }, 3000);
    }
</script>

</body>
</html>